(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5950],{19572:function(e,t,n){"use strict";var o=n(64836);t.Z=void 0;var l=o(n(64938)),i=n(85893),a=(0,l.default)((0,i.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");t.Z=a},64378:function(e,t,n){"use strict";var o,l=n(67294);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}t.Z=function(e){return l.createElement("svg",i({width:"1em",height:"1em",viewBox:"0 0 10 14",fill:"none",stroke:"#9D9FA1",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=l.createElement("path",{d:"m6.901 3.646-.412.282.412-.282a2.28 2.28 0 0 0-1.027-.824 2.321 2.321 0 0 0-2.482.487 2.218 2.218 0 0 0-.5 2.456c.174.413.468.764.843 1.01A2.313 2.313 0 0 0 6.619 6.5a2.249 2.249 0 0 0 .673-1.603 2.226 2.226 0 0 0-.39-1.251ZM5 13.245a32.113 32.113 0 0 1-2.088-2.7c-.616-.895-1.223-1.891-1.676-2.881C.78 6.667.5 5.714.5 4.899a4.35 4.35 0 0 1 1.314-3.107A4.553 4.553 0 0 1 5 .5c1.197 0 2.342.466 3.186 1.292A4.35 4.35 0 0 1 9.5 4.899c0 .816-.28 1.768-.736 2.765-.453.99-1.06 1.986-1.676 2.88A32.113 32.113 0 0 1 5 13.244Z"})))}},92701:function(e,t,n){"use strict";var o,l=n(67294);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}t.Z=function(e){return l.createElement("svg",i({width:"1em",height:"1em",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=l.createElement("path",{d:"M8.666 17.002a8.334 8.334 0 1 1 0-16.67 8.336 8.336 0 0 1 5.894 14.231 8.281 8.281 0 0 1-5.894 2.439Zm0-7.158 2.991 2.991 1.175-1.175-2.991-2.992 2.992-2.992-1.175-1.174-2.992 2.991-2.992-2.99L4.5 5.675l2.99 2.992L4.5 11.66l1.174 1.176 2.992-2.992Z",fill:"#000"})))}},91702:function(e,t,n){"use strict";n.d(t,{D:function(){return H}});var o,l,i=n(85893),a=n(67294),c=n(2664),s=n(30596),d=n(9008),r=n.n(d),u=n(98456),m=n(19058),p=n(3569),v=n(36590),h=n(56559),g=n(17506),f=n(55509),_=n(89070),x=n(11183),y=n(19572);function S(){return(S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var L=function(e){return a.createElement("svg",S({width:"1em",height:"1em",viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=a.createElement("path",{d:"M10.135 6.449a3.685 3.685 0 1 0 0 7.37 3.685 3.685 0 0 0 0-7.37Zm8.237 2.764A8.287 8.287 0 0 0 11.056 1.9V0H9.213v1.9A8.287 8.287 0 0 0 1.9 9.213H0v1.843h1.9a8.287 8.287 0 0 0 7.315 7.315v1.9h1.843v-1.9a8.287 8.287 0 0 0 7.315-7.315h1.9V9.213h-1.901Zm-8.237 7.371a6.448 6.448 0 1 1 0-12.897 6.448 6.448 0 0 1 0 12.897Z",fill:"#E00646"})))},b=n(64378),w=n(92701);function A(){return(A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var j=function(e){return a.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 19.99 19.994"},e),l||(l=a.createElement("path",{"data-name":"Icon awesome-search",d:"m19.718 17.286-3.893-3.893a.936.936 0 0 0-.664-.273h-.636a8.118 8.118 0 1 0-1.406 1.406v.636a.936.936 0 0 0 .273.664l3.893 3.893a.933.933 0 0 0 1.324 0l1.105-1.105a.942.942 0 0 0 0-1.328ZM8.122 13.12a5 5 0 1 1 5-5 5 5 0 0 1-5 5Z",fill:"#a7a7a7"})))},I=n(74636),M=n.n(I),k=n(6154),C=n(46598);let E={lat:28.612933,lng:77.229525},N={},Z={},B=!1,D=null,O=!1,P=!1,z=e=>{let{setOpenSelectMMILocation:t,setOpenAddressDetails:n,selectedLocation:o,setSelectedLocation:l,addressDetails:d,setAddressDetails:m,shareLocation:S,hash:A,phone:I}=e,{setErrorMessage:z,setError:H,errorMessage:R}=(0,s.j)(),T=(0,c.useDispatch)(),[U,$]=(0,a.useState)(""),[Q,J]=(0,a.useState)(!1),V=(0,c.useSelector)(v.ck),F=(0,c.useSelector)(v.NR),G=(0,c.useSelector)(v.sS),q=(0,c.useSelector)(v.t2),K=(0,c.useSelector)(h.wK),W=(0,c.useSelector)(h.B_),X=(0,c.useSelector)(h.VF),Y=()=>{B=!1;let e=document.getElementById("checkout-map-detect-location");e&&(e.disabled=!1);let t=document.getElementById("checkout-map-detect-location-span");t&&(t.innerText="Detect Location"),J(!1)},ee=e=>{if((null==Z?void 0:Z.getLocation)&&!O){var t,n,i,a,c,s,d,r,u,m;let e=null==Z?void 0:Z.getLocation(),p=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.lat,v=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.lng;_.XA.initialLocation?(l({...o}),_.XA.initialLocation=!1):D?(l({...D,lat:p,lng:v}),D=null):P?l({...null==e?void 0:e.data}):(async()=>{await navigator.permissions.query({name:"geolocation"}).then(e=>{"denied"!==e.state&&(el(),P=!0)}).finally(()=>{l({...null==e?void 0:e.data})})})(),Y();let h=N.getZoom();if(17===h){let e=null===(i=document.getElementsByClassName("map-zoom-in"))||void 0===i?void 0:i.item(0);null==e||null===(a=e.classList)||void 0===a||a.add(M().disabled)}else if(5===h){let e=null===(c=document.getElementsByClassName("map-zoom-out"))||void 0===c?void 0:c.item(0);null==e||null===(s=e.classList)||void 0===s||s.add(M().disabled)}else{let e=null===(d=document.getElementsByClassName("map-zoom-in"))||void 0===d?void 0:d.item(0);null==e||null===(r=e.classList)||void 0===r||r.remove(M().disabled);let t=null===(u=document.getElementsByClassName("map-zoom-out"))||void 0===u?void 0:u.item(0);null==t||null===(m=t.classList)||void 0===m||m.remove(M().disabled)}}},et=()=>{try{N=new mappls.Map("checkout-map-container",{center:o?{lat:o.lat,lng:o.lng}:E,fullscreenControl:!1,traffic:!1,clickableIcons:!1,indoor:!1,zoom:12,maxZoom:17,minZoom:5,zoomControl:!(0,f.tq)(),geolocation:!0,rotateControl:!1,scaleControl:!1}),J(!0),N.addListener("idle",ee),N.addListener("movestart",()=>{J(!0)}),N.addListener("load",function(){var e={map:N,header:!1,closeBtn:!1,pinImage:"https://staticcdn.redcliffelabs.com/media/gallary-file/None/fe29689d-91b3-4af2-85d9-5ea723f455ef.png",pinHeight:50};mappls.placePicker(e,function(e){Z=e})})}catch(e){}};(0,a.useEffect)(()=>{O=!1,P=!1},[]),(0,a.useEffect)(()=>{(null==q?void 0:q.map)&&(null==q?void 0:q.plugins)&&et()},[q]);let en=(e,t)=>{(0,f.H$)(e,200),D={...t};try{mappls.getPinDetails({map:N,pin:null==t?void 0:t.eLoc,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z/C/HgAGgwJ/lK3Q6wAAAABJRU5ErkJggg==",markerPopup:!1,infoDiv:!1,fitbounds:!1,divId:"checkout-map-marker"},e=>{e.fitbounds({maxZoom:16})})}catch(e){}T((0,v.eR)())};(0,a.useEffect)(()=>{if(!W&&(K||X)){if((null==K?void 0:K.status)&&(null==K?void 0:K.cityid)){let e={...o,cityId:null==K?void 0:K.cityid,addressId:null==d?void 0:d.id};O=!0,l({...e}),m(null),n(!0),t(!1)}else H(!0),(null==X?void 0:X.message.includes("timeout"))?z(_.S0.network_error):z(_.S0.geo_fence),T((0,h.q$)());T((0,h.CP)())}},[W]);let eo=()=>{B=!0;let e=document.getElementById("checkout-map-detect-location");e&&(e.disabled=!0);let t=document.getElementById("checkout-map-detect-location-span");t&&(t.innerText="Detecting..."),J(!0)},el=e=>{B||(e&&(0,f.H$)(e,250),T((0,v.eR)()),eo(),navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{console.log("Granted");let t=e.coords.latitude,n=e.coords.longitude;null==N||N.flyTo({center:[n,t]})},()=>{z("Please Grant Location Permission"),Y()},{enableHighAccuracy:!0,maximumAge:3e5,timeout:2e4}):(z("Location Services not supported"),Y()))},ei=e=>{$(e),T((0,v.eR)()),H(!1),(R===_.S0.geo_fence||R===_.S0.no_MMI_Suggestions)&&z(""),_.Q$.timeoutID&&(clearTimeout(_.Q$.timeoutID),_.Q$.timeoutID=""),(null==e?void 0:e.length)>=3&&(_.Q$.timeoutID=setTimeout(e=>{T((0,v.RT)({searchText:e,MMIToken:V})),_.Q$.timeoutID=""},[1e3],e))},ea=()=>(null==o?void 0:o.lat)==E.lat&&(null==o?void 0:o.lng)==E.lng,ec=async e=>{if(S){let{lat:e,lng:t}=o,{data:n}=await k.Z.put("".concat(C.Ns,"communication/verify-location/?hashid=").concat(A),{lat:e,lng:t});(null==n?void 0:n.success)&&window.open("https://wa.me/+91".concat(I,"?text=I have added my address"),"_self");return}if((0,f.H$)(e,250),ea()){z(_.S0.select_location);return}T((0,h.SE)({lat:null==o?void 0:o.lat,lng:null==o?void 0:o.lng}))},es=()=>{t(!1),d&&n(!0)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r(),{children:[(0,i.jsx)("style",{children:"\n        ".concat(Array.from(Array(10),e=>null).map((e,t)=>"#mLogo".concat(t)).toString()," {display:none}\n        ").concat(Array.from(Array(50),e=>null).map((e,t)=>"#cst_mid".concat(t)).toString()," {display:none} \n        #mmiPickerBot {display:none !important} \n        .mapboxgl-ctrl-geolocate {height: 1px !important;width: 1px !important;overflow: hidden !important;opacity: 0 !important;padding: 0 !important;border: none !important;}\n        ")}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1 interactive-widget=overlays-content"})]}),(0,i.jsxs)("div",{className:M().cont,children:[(0,i.jsx)("div",{id:"checkout-map-container",className:M().mapCont}),(0,i.jsxs)("button",{id:"checkout-map-detect-location",className:M().mapDetectLocation,onClick:el,children:[(0,i.jsx)(L,{}),(0,i.jsx)("span",{id:"checkout-map-detect-location-span",children:"Detect Location"})]}),(0,i.jsxs)("div",{className:M().mapSelectedLocationCont,children:[(0,i.jsx)("h6",{children:"Select Pick Up Location"}),(0,i.jsxs)("div",{className:M().mapSelectedLocation,children:[(0,i.jsx)(b.Z,{}),(0,i.jsx)("div",{id:"map-selected-address",children:Q?(0,i.jsx)("div",{className:M().selectedAddressShimmer,children:Array.from([,,,],e=>null).map((e,t)=>(0,i.jsx)(p.Z,{cardHeight:"15px",cardWidth:"70%",cardBorderRadius:"5px",forceShimmer:!0},t))}):ea()?(0,i.jsx)("p",{children:"Search location or allow location permission"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:(0,g.Ht)(o)}),(0,i.jsx)("p",{children:(0,g.sU)(o)})]})})]}),(0,i.jsx)("button",{type:"button",className:"".concat(M().submitButton," ").concat(Q||ea()?M().disabledEffect:""),onClick:ec,disabled:Q||ea(),children:W&&o?(0,i.jsx)(u.Z,{size:15,thickness:6,style:{color:"white"}}):K?_.S0.geo_fence:S?"Complete booking via whatsapp":"Enter Complete Address"})]}),(0,i.jsxs)("div",{className:M().mapSearchCont,children:[(0,i.jsxs)("div",{className:M().searchInputCont,style:{borderBottom:(null==F?void 0:F.length)&&U?"1px solid #a7a7a7":"none",borderRadius:(null==F?void 0:F.length)&&U?"15px 15px 0 0":"15px 15px 15px 15px"},children:[!S&&(0,i.jsx)(y.Z,{fontSize:"large",className:M().backIcon,onClick:es}),(0,i.jsx)("input",{className:M().search,type:"text",placeholder:"Search your location",value:U,onChange:e=>ei(e.target.value)}),(_.Q$.timeoutID||G)&&U?(0,i.jsx)(u.Z,{size:15,style:{color:"#a7a7a7"},thickness:6}):U?(0,i.jsx)(w.Z,{className:M().crossIcon,onClick:()=>$("")}):(0,i.jsx)(j,{className:M().searchIcon})]}),(null==F?void 0:F.length)&&U?(0,i.jsx)("div",{id:"checkout-address-suggest-cont",className:M().locationSuggestions,children:F.map(e=>(0,i.jsxs)("div",{className:M().suggestion,onClick:t=>{en(t,e)},children:[(0,i.jsx)("span",{children:null==e?void 0:e.placeName}),(0,i.jsx)("p",{children:null==e?void 0:e.placeAddress})]},e.eLoc))}):null]}),(0,i.jsx)(x.Z,{message:R,setMessage:z,autoHideTime:3e3})]})]})},H=e=>{let{openSelectMMILocation:t,setOpenSelectMMILocation:n,setOpenAddressDetails:o,addressDetails:l,setAddressDetails:a,selectedLocation:c,setSelectedLocation:s,shareLocation:d,hash:r,phone:u}=e;return(0,i.jsx)(m.ZP,{open:t,onClose:()=>{d||n(!1)},anchor:(0,f.Bx)(),sx:{"& .MuiDrawer-paper":{height:(0,f.W)("100vh"),borderRadius:(0,f.s_)("0","0")}},children:(0,i.jsx)(z,{setOpenSelectMMILocation:n,setOpenAddressDetails:o,addressDetails:l,setAddressDetails:a,selectedLocation:c,setSelectedLocation:s,shareLocation:d,hash:r,phone:u})})};H.defaultProps={shareLocation:!1,hash:"",phone:""},z.defaultProps={shareLocation:!1,hash:"",phone:""}},17506:function(e,t,n){"use strict";n.d(t,{Ht:function(){return o},sU:function(){return l},yd:function(){return i}});let o=e=>{if((null==e?void 0:e.placeName)||(null==e?void 0:e.placeAddress))return null==e?void 0:e.placeName;if(null==e?void 0:e.address_line1){var t,n;return null==e?void 0:null===(t=e.address_line1)||void 0===t?void 0:t.slice(0,null==e?void 0:null===(n=e.address_line1)||void 0===n?void 0:n.indexOf(","))}{let t=a(e);return null==t?void 0:t.slice(0,null==t?void 0:t.indexOf(","))}},l=e=>{if((null==e?void 0:e.placeName)||(null==e?void 0:e.placeAddress))return null==e?void 0:e.placeAddress;if(null==e?void 0:e.address_line1){var t,n;return null==e?void 0:null===(t=e.address_line1)||void 0===t?void 0:t.slice((null==e?void 0:null===(n=e.address_line1)||void 0===n?void 0:n.indexOf(","))+1)}{let t=a(e);return null==t?void 0:t.slice((null==t?void 0:t.indexOf(","))+1)}},i=e=>{let t="",n="";try{if(e){let i=null==e?void 0:e.address_components;if(i.length>0){for(let e=0;e<i.length;e++){var o,l;let n=i[e];(null==n?void 0:null===(o=n.types)||void 0===o?void 0:o.includes("country"))||(null==n?void 0:null===(l=n.types)||void 0===l?void 0:l.includes("plus_code"))||(t+="".concat(null==n?void 0:n.short_name,", "))}t=t.trim().slice(0,-1);let e=null==t?void 0:t.split(", ");for(let t=0;t<(null==e?void 0:e.length);t++){let o=e[t];if((null==o?void 0:o.length)>=3){n=o;break}}}}}catch(e){console.warn(e)}return{addressStr:t,locationTitle:n}},a=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:", ",o="";return o+=(null==e?void 0:e.poi)?e.poi+n:"",(null==e?void 0:e.street)&&(null==e?void 0:null===(t=e.street)||void 0===t?void 0:t.toLowerCase())!=="unnamed road"&&(o+=e.street+n),(o+=((null==e?void 0:e.village)?e.village+n:"")+((null==e?void 0:e.subSubLocality)?e.subSubLocality+n:"")+((null==e?void 0:e.subLocality)?e.subLocality+n:"")+((null==e?void 0:e.locality)?e.locality+n:"")+((null==e?void 0:e.city)?e.city+n:"")+((null==e?void 0:e.state)?e.state+n:"")+((null==e?void 0:e.pincode)?e.pincode+n:"")).slice(0,-2)}},9827:function(e,t,n){"use strict";var o=n(67294),l=n(2664),i=n(72125),a=n(36590);let c=()=>{let e=(0,l.useDispatch)(),t=(0,l.useSelector)(a.ck),n=(0,l.useSelector)(i.uy),c=(0,l.useSelector)(a.t2);return(0,o.useEffect)(()=>{if(t&&((null==c?void 0:c.map)===!1||(null==c?void 0:c.plugins)===!1)){let n=document.createElement("script");n.src="https://apis.mappls.com/advancedmaps/api/".concat(t,"/map_sdk_plugins?v=3.0&libraries=placePicker,search,getPinDetails"),n.async=!0,n.onload=()=>{e((0,a.PJ)({plugins:!0}))};let o=document.createElement("script");o.src="https://apis.mappls.com/advancedmaps/api/".concat(t,"/map_sdk?v=3.0"),o.async=!0,o.onload=()=>{e((0,a.PJ)({map:!0}))},document.head.appendChild(n),document.head.appendChild(o)}},[t]),(0,o.useEffect)(()=>{var o;(null==n?void 0:null===(o=n.user)||void 0===o?void 0:o.token)?t||e((0,a.tU)()):e((0,a.Nn)())},[n]),null};t.Z=c},74636:function(e){e.exports={cont:"SelectMMILocation_cont__1pohU",mapCont:"SelectMMILocation_mapCont__yCFNu",mapSearchCont:"SelectMMILocation_mapSearchCont___jkzf",searchInputCont:"SelectMMILocation_searchInputCont__OgAwz",backIcon:"SelectMMILocation_backIcon__9nL5z",searchIcon:"SelectMMILocation_searchIcon__gJI1i",crossIcon:"SelectMMILocation_crossIcon__SL3r4",locationSuggestions:"SelectMMILocation_locationSuggestions__cJfur",suggestion:"SelectMMILocation_suggestion__4ZV3q",mapDetectLocation:"SelectMMILocation_mapDetectLocation__CHDi4",mapSelectedLocationCont:"SelectMMILocation_mapSelectedLocationCont___MVhM",mapSelectedLocation:"SelectMMILocation_mapSelectedLocation__7py_E",selectedAddressShimmer:"SelectMMILocation_selectedAddressShimmer__VdS_B",submitButton:"SelectMMILocation_submitButton__6GQru",disabled:"SelectMMILocation_disabled__TK6lW",disabledEffect:"SelectMMILocation_disabledEffect__t2xUd"}}}]);